<!DOCTYPE html>
<html>
<head>
	<style>
		.my-contextmenu {
			display: none;
			position: fixed;
			width: 200px;
			background-color: #fff;
			border: 1px solid #ccc;
			box-shadow: 1px 1px 1px rgba(0,0,0,.2);
			z-index: 1000;
			}
		.my-contextmenu.show {
			display: block;
			}
		.my-contextmenu ul {
			list-style: none;
			}
		.my-contextmenu ul li {
			padding: 4px 4px;
			font-size: 14px;
			color: #333;
			}
	</style>
</head>
<body onContextmenu="return false;">
	<img src="./floor_map/sample.svg" id="target">
	<br>
	<!-- context menu --> 
	<div class="my-contextmenu" id="js-contextmenu">
		<ul>
		<li>add picture here</li>
		<li>add text here</li>
		<li>menu3</li>
		</ul>
	</div>
	<script>
		var myContextMenu = document.getElementById('js-contextmenu');
		document.getElementById("target").addEventListener('contextmenu',function(e){
			var imgRect = this.getBoundingClientRect() ;
			var x = e.pageX + imgRect.left;
			var y = e.pageY + imgRect.top;
			myContextMenu.style.left = x+'px';
			myContextMenu.style.top = y+'px';
			myContextMenu.classList.add('show');
			console.log(x,y);   // x座標(絶対座標)
		});
		document.body.addEventListener('click',function(){
			if(myContextMenu.classList.contains('show')) {
				myContextMenu.classList.remove('show');
			}
		});
	</script>
	<span id="export-link"></span>
	<script>
		//JSON preserve
		var tasks = [
		{ task: 'task1', isDone: true, tags: ['project1', 'memo'] },
		{ task: 'task2', isDone: false, tags: ['project1', 'memo'] },
		{ task: 'task3', isDone: false, tags: ['project2', 'asap'] }
		];
		var data = JSON.stringify(tasks);
		var a = document.createElement('a');
		a.textContent = 'export'
		a.download = 'tasks.json';
		a.href = window.URL.createObjectURL(new Blob([data], { type: 'text/plain' }));
		a.dataset.downloadurl = ['text/plain', a.download, a.href].join(':');
		var exportLink = document.getElementById('export-link');
		exportLink.appendChild(a);
	</script>
</body>
</html>